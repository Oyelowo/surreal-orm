apiVersion: v1
kind: Service
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{\"linkerd.io/inject\":\"enabled\"},\"labels\":{\"app.kubernetes.io/managed-by\":\"pulumi\"},\"name\":\"graphql-mongo\",\"namespace\":\"applications\"},\"spec\":{\"replicas\":2,\"selector\":{\"matchLabels\":{\"app\":\"graphql\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"graphql\"}},\"spec\":{\"containers\":[{\"env\":[{\"name\":\"APP_ENVIRONMENT\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"APP_ENVIRONMENT\",\"name\":\"graphql-mongo\"}}},{\"name\":\"APP_HOST\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"APP_HOST\",\"name\":\"graphql-mongo\"}}},{\"name\":\"APP_PORT\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"APP_PORT\",\"name\":\"graphql-mongo\"}}},{\"name\":\"APP_EXTERNAL_BASE_URL\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"APP_EXTERNAL_BASE_URL\",\"name\":\"graphql-mongo\"}}},{\"name\":\"OAUTH_GITHUB_CLIENT_ID\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"OAUTH_GITHUB_CLIENT_ID\",\"name\":\"graphql-mongo\"}}},{\"name\":\"OAUTH_GITHUB_CLIENT_SECRET\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"OAUTH_GITHUB_CLIENT_SECRET\",\"name\":\"graphql-mongo\"}}},{\"name\":\"OAUTH_GOOGLE_CLIENT_ID\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"OAUTH_GOOGLE_CLIENT_ID\",\"name\":\"graphql-mongo\"}}},{\"name\":\"OAUTH_GOOGLE_CLIENT_SECRET\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"OAUTH_GOOGLE_CLIENT_SECRET\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_NAME\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_NAME\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_USERNAME\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_USERNAME\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_PASSWORD\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_PASSWORD\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_ROOT_USERNAME\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_ROOT_USERNAME\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_ROOT_PASSWORD\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_ROOT_PASSWORD\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_HOST\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_HOST\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_SERVICE_NAME\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_SERVICE_NAME\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_STORAGE_CLASS\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_STORAGE_CLASS\",\"name\":\"graphql-mongo\"}}},{\"name\":\"MONGODB_PORT\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"MONGODB_PORT\",\"name\":\"graphql-mongo\"}}},{\"name\":\"REDIS_USERNAME\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"REDIS_USERNAME\",\"name\":\"graphql-mongo\"}}},{\"name\":\"REDIS_PASSWORD\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"REDIS_PASSWORD\",\"name\":\"graphql-mongo\"}}},{\"name\":\"REDIS_HOST\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"REDIS_HOST\",\"name\":\"graphql-mongo\"}}},{\"name\":\"REDIS_SERVICE_NAME\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"REDIS_SERVICE_NAME\",\"name\":\"graphql-mongo\"}}},{\"name\":\"REDIS_SERVICE_NAME_WITH_SUFFIX\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"REDIS_SERVICE_NAME_WITH_SUFFIX\",\"name\":\"graphql-mongo\"}}},{\"name\":\"REDIS_PORT\",\"valueFrom\":{\"secretKeyRef\":{\"key\":\"REDIS_PORT\",\"name\":\"graphql-mongo\"}}}],\"image\":\"ghcr.io/oyelowo/graphql-mongo:master-f21d07e5b52e5fdc859482d526310efc78d9efea\",\"livenessProbe\":{\"failureThreshold\":7,\"httpGet\":{\"path\":\"/api/liveness\",\"port\":8000},\"initialDelaySeconds\":300,\"periodSeconds\":10},\"name\":\"graphql\",\"ports\":[{\"containerPort\":8000,\"name\":\"http\"}],\"readinessProbe\":{\"failureThreshold\":7,\"httpGet\":{\"path\":\"/api/healthz\",\"port\":8000},\"initialDelaySeconds\":60,\"periodSeconds\":10},\"resources\":{\"limits\":{\"cpu\":\"100m\",\"memory\":\"200Mi\"},\"requests\":{\"cpu\":\"100m\",\"memory\":\"70Mi\"}},\"volumeMounts\":[]}],\"imagePullSecrets\":[{\"name\":\"my-registry-key\"}],\"initContainers\":[],\"volumes\":[]}}}}\n","linkerd.io/inject":"enabled"},"labels":{"app.kubernetes.io/managed-by":"pulumi"},"name":"graphql-mongo","namespace":"applications"},"spec":{"ports":[{"name":"graphql-mongo-http","port":8000,"protocol":"TCP","targetPort":8000}],"selector":{"app":"graphql"},"type":"ClusterIP"}}
    linkerd.io/inject: enabled
  labels:
    app.kubernetes.io/managed-by: pulumi
  name: graphql-mongo
  namespace: applications
spec:
  ports:
  - name: graphql-mongo-http
    port: 8000
    protocol: TCP
    targetPort: 8000
  selector:
    app: graphql
  type: ClusterIP
