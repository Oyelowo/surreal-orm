apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"labels":{"app.kubernetes.io/instance":"sealed-secrets-helm","app.kubernetes.io/managed-by":"pulumi","app.kubernetes.io/name":"sealed-secrets","app.kubernetes.io/version":"v0.17.3","helm.sh/chart":"sealed-secrets-2.1.4"},"name":"sealed-secrets-controller","namespace":"development"},"spec":{"selector":{"matchLabels":{"app.kubernetes.io/instance":"sealed-secrets-helm","app.kubernetes.io/name":"sealed-secrets"}},"template":{"metadata":{"labels":{"app.kubernetes.io/instance":"sealed-secrets-helm","app.kubernetes.io/name":"sealed-secrets"}},"spec":{"containers":[{"args":["--update-status","--key-prefix","sealed-secrets-key"],"command":["controller"],"image":"quay.io/bitnami/sealed-secrets-controller:v0.17.3","imagePullPolicy":"IfNotPresent","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/healthz","port":"http"},"initialDelaySeconds":0,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"name":"controller","ports":[{"containerPort":8080,"name":"http"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/healthz","port":"http"},"initialDelaySeconds":0,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":1},"resources":{"limits":{},"requests":{}},"securityContext":{"readOnlyRootFilesystem":true,"runAsNonRoot":true,"runAsUser":1001},"volumeMounts":[{"mountPath":"/tmp","name":"tmp"}]}],"securityContext":{"fsGroup":65534},"serviceAccountName":"sealed-secrets-controller","volumes":[{"emptyDir":{},"name":"tmp"}]}}}}
  labels:
    app.kubernetes.io/instance: sealed-secrets-helm
    app.kubernetes.io/managed-by: pulumi
    app.kubernetes.io/name: sealed-secrets
    app.kubernetes.io/version: v0.17.3
    helm.sh/chart: sealed-secrets-2.1.4
  name: sealed-secrets-controller
  namespace: development
spec:
  selector:
    matchLabels:
      app.kubernetes.io/instance: sealed-secrets-helm
      app.kubernetes.io/name: sealed-secrets
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: sealed-secrets-helm
        app.kubernetes.io/name: sealed-secrets
    spec:
      containers:
      - args:
        - --update-status
        - --key-prefix
        - sealed-secrets-key
        command:
        - controller
        image: quay.io/bitnami/sealed-secrets-controller:v0.17.3
        imagePullPolicy: IfNotPresent
        livenessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz
            port: http
          initialDelaySeconds: 0
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        name: controller
        ports:
        - containerPort: 8080
          name: http
        readinessProbe:
          failureThreshold: 3
          httpGet:
            path: /healthz
            port: http
          initialDelaySeconds: 0
          periodSeconds: 10
          successThreshold: 1
          timeoutSeconds: 1
        resources:
          limits: {}
          requests: {}
        securityContext:
          readOnlyRootFilesystem: true
          runAsNonRoot: true
          runAsUser: 1001
        volumeMounts:
        - mountPath: /tmp
          name: tmp
      securityContext:
        fsGroup: 65534
      serviceAccountName: sealed-secrets-controller
      volumes:
      - emptyDir: {}
        name: tmp
