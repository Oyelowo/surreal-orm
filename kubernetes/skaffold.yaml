apiVersion: skaffold/v2beta26
kind: Config
metadata:
  name: kubernetes
build:
  artifacts:
  - image: oyelowo/web
    context: ../typescript
    docker:
      dockerfile: Dockerfile.prod
      target: web
      noCache: false
      squash: false
  #   requires:
  #     - image: base
  #       alias: BASE
  # - image: base
  #   context: BASE
  #   buildpacks:
  #     builder: gcr.io/buildpacks/builder:v1

deploy:
  kubectl:
    manifests:
    - rendered/**/1-manifest/*
portForward:
  - resourceType: deployment
    resourceName: leeroy-web
    port: 3000
    localPort: 3001