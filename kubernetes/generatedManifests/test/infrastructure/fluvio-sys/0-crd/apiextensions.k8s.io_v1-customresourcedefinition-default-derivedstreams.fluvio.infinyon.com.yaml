apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations: {}
  labels:
    app.kubernetes.io/managed-by: pulumi
  name: derivedstreams.fluvio.infinyon.com
spec:
  group: fluvio.infinyon.com
  names:
    kind: DerivedStream
    plural: derivedstreams
    singular: derivedstream
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            properties:
              input:
                oneOf:
                - required:
                  - topic
                - required:
                  - derivedstream
                properties:
                  derivedstream:
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                  topic:
                    properties:
                      name:
                        type: string
                    required:
                    - name
                    type: object
                type: object
              steps:
                items:
                  oneOf:
                  - required:
                    - filter
                  - required:
                    - map
                  - required:
                    - filterMap
                  - required:
                    - aggregate
                  - required:
                    - groupBy
                  - required:
                    - join
                  properties:
                    aggregate:
                      properties:
                        id:
                          type: string
                        module:
                          type: string
                      required:
                      - module
                      type: object
                    filter:
                      properties:
                        id:
                          type: string
                        module:
                          type: string
                      required:
                      - module
                      type: object
                    filterMap:
                      properties:
                        id:
                          type: string
                        module:
                          type: string
                      required:
                      - module
                      type: object
                    join:
                      properties:
                        id:
                          type: string
                        module:
                          type: string
                        right:
                          oneOf:
                          - required:
                            - topic
                          - required:
                            - derivedstream
                          properties:
                            derivedstream:
                              properties:
                                name:
                                  type: string
                              required:
                              - name
                              type: object
                            topic:
                              properties:
                                name:
                                  type: string
                              required:
                              - name
                              type: object
                          type: object
                      required:
                      - module
                      - right
                      type: object
                    map:
                      properties:
                        id:
                          type: string
                        module:
                          type: string
                      required:
                      - module
                      type: object
                  type: object
                type: array
            required:
            - input
            type: object
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
